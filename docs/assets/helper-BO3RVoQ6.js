const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/webSocket-Cgc5zZFK.js","assets/server-Dni69iLD.js","assets/modules/vue-rRtXEXxZ.js","assets/index-Ctv7smnI.js","assets/modules/shiki-B49DkA4F.js","assets/modules/shiki-BPvBenZD.css","assets/index-BNRJBLyT.css","assets/hashids-CTCUm3b4.js","assets/http-DDMbSk30.js"])))=>i.map(i=>d[i]);
import{af as o,ag as A,z as i,ah as D,y as b,L as I}from"./index-Ctv7smnI.js";import{K as S,aG as M}from"./modules/vue-rRtXEXxZ.js";import{H as O}from"./hashids-CTCUm3b4.js";var R=(t=>(t[t.CLEAR=0]="CLEAR",t[t.OPEN=1]="OPEN",t[t.CLOSED=2]="CLOSED",t))(R||{});const l=S({});let U=[],T=[];o(l,"$syncUp",!0);o(l,"$syncDown",!0);o(l,"$paused",!1);o(l,"$onSet",t=>U.push(t));o(l,"$onPatch",t=>T.push(t));A();o(l,"$patch",async()=>!1);const u=S({});let H=[],N=[];o(u,"$syncUp",!0);o(u,"$syncDown",!0);o(u,"$paused",!1);o(u,"$onSet",t=>H.push(t));o(u,"$onPatch",t=>N.push(t));A();o(u,"$patch",async()=>!1);var L;const r=(L=i.pollSettings)!=null&&L.server?S({}):D(l,{}).state;var V;const P=(V=i.pollSettings)!=null&&V.server?S({}):D(u,{}).state;var w,j=new Uint8Array(16);function G(){if(!w&&(w=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!w))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return w(j)}const W=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function z(t){return typeof t=="string"&&W.test(t)}var a=[];for(var $=0;$<256;++$)a.push(($+256).toString(16).substr(1));function K(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=(a[t[e+0]]+a[t[e+1]]+a[t[e+2]]+a[t[e+3]]+"-"+a[t[e+4]]+a[t[e+5]]+"-"+a[t[e+6]]+a[t[e+7]]+"-"+a[t[e+8]]+a[t[e+9]]+"-"+a[t[e+10]]+a[t[e+11]]+a[t[e+12]]+a[t[e+13]]+a[t[e+14]]+a[t[e+15]]).toLowerCase();if(!z(s))throw TypeError("Stringified UUID is invalid");return s}function X(t,e,s){t=t||{};var n=t.random||(t.rng||G)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,K(n)}const g=M("slidev-poll-device-id",X()),_=M("slidev-poll-user-id",P[g.value]??""),x=[],k=t=>{x.push(t)};setTimeout(()=>{_&&!P[g.value]&&x.forEach(t=>{t(_.value)})});let d,p,v,h,y,C=()=>{};const E=new Promise(t=>{C=t}),m=(async()=>{var t;(t=i.pollSettings)!=null&&t.server?i.pollSettings.server.startsWith("ws")?{answer:h,connect:d,login:y,reset:v,setStatus:p}=await b(()=>import("./webSocket-Cgc5zZFK.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])):{answer:h,connect:d,login:y,reset:v,setStatus:p}=await b(()=>import("./http-DDMbSk30.js"),__vite__mapDeps([8,1,2,3,4,5,6,7])):C()})();async function Z(t,e){r[t]&&e!==null&&(r[t].results[g.value]=e,await m,await E,h==null||h(t,e))}async function tt(){await m,d==null||d(C)}async function q(t){P[g.value]=t,await m,await E,y==null||y(t)}k(q);async function et(t){r[t].results={},r[t].status=R.CLEAR,await m,await E,v==null||v(t)}async function nt(t,e){r[t].status=e,await m,await E,p==null||p(t,e)}function st(t){r[t]={results:{},status:R.CLEAR}}const B=new O;function at(t,e){return t===void 0||e===void 0?!1:e instanceof Array?e.includes(t):Number(e)===t}function ot(t,e,s){var c,f;const n=(f=(c=r[t])==null?void 0:c.results)==null?void 0:f[g.value];if(e){if(n instanceof Array&&s||typeof n=="number"&&!s)return n;if(s&&typeof n=="number")return[n];if(!s&&n instanceof Array)return n[0]}return s?[]:null}function F(t,e=0){let s=3735928559^e,n=1103547991^e;for(let c=0,f;c<t.length;c++)f=t.charCodeAt(c),s=Math.imul(s^f,2654435761),n=Math.imul(n^f,1597334677);return s=Math.imul(s^s>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507)^Math.imul(s^s>>>13,3266489909),4294967296*(2097151&n)+(s>>>0)}function it(){const t=I.value.map(e=>{var s,n;return((n=(s=e==null?void 0:e.meta)==null?void 0:s.slide)==null?void 0:n.content)??""}).join(`
`);return B.encode(F(t))}function rt(){var t;return(t=i.pollSettings)!=null&&t.server?i.pollSettings.server.endsWith("/")?i.pollSettings.server.slice(0,-1):i.pollSettings.server:""}export{R as P,P as a,Z as b,tt as c,g as d,st as e,rt as f,ot as g,it as h,at as i,q as l,r as p,et as r,nt as s,_ as u};
