const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/webSocket-CskTqgpa.js","assets/server-u2hIfvWc.js","assets/modules/vue-CHNgrS5A.js","assets/index-CC0CoKEQ.js","assets/modules/shiki-B4CAAHVZ.js","assets/modules/shiki-BPvBenZD.css","assets/index-C6FkJhjp.css","assets/hashids-CTCUm3b4.js","assets/http-D1AQt3Fb.js"])))=>i.map(i=>d[i]);
import{ad as o,ae as A,z as i,af as D,y as b,L as I}from"./index-CC0CoKEQ.js";import{K as S,aF as M}from"./modules/vue-CHNgrS5A.js";import{H as O}from"./hashids-CTCUm3b4.js";var R=(e=>(e[e.CLEAR=0]="CLEAR",e[e.OPEN=1]="OPEN",e[e.CLOSED=2]="CLOSED",e))(R||{});const l=S({});let U=[],T=[];o(l,"$syncUp",!0);o(l,"$syncDown",!0);o(l,"$paused",!1);o(l,"$onSet",e=>U.push(e));o(l,"$onPatch",e=>T.push(e));A();o(l,"$patch",async()=>!1);const u=S({});let H=[],N=[];o(u,"$syncUp",!0);o(u,"$syncDown",!0);o(u,"$paused",!1);o(u,"$onSet",e=>H.push(e));o(u,"$onPatch",e=>N.push(e));A();o(u,"$patch",async()=>!1);var L;const r=(L=i.pollSettings)!=null&&L.server?S({}):D(l,{}).state;var V;const P=(V=i.pollSettings)!=null&&V.server?S({}):D(u,{}).state;var w,j=new Uint8Array(16);function W(){if(!w&&(w=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!w))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return w(j)}const z=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function F(e){return typeof e=="string"&&z.test(e)}var a=[];for(var $=0;$<256;++$)a.push(($+256).toString(16).substr(1));function G(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase();if(!F(s))throw TypeError("Stringified UUID is invalid");return s}function K(e,t,s){e=e||{};var n=e.random||(e.rng||W)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,G(n)}const m=M("slidev-poll-device-id",K()),_=M("slidev-poll-user-id",P[m.value]??""),x=[],X=e=>{x.push(e)};setTimeout(()=>{_&&!P[m.value]&&x.forEach(e=>{e(_.value)})});let d,p,v,h,y,C=()=>{};const E=new Promise(e=>{C=e}),g=(async()=>{var e;(e=i.pollSettings)!=null&&e.server?i.pollSettings.server.startsWith("ws")?{answer:h,connect:d,login:y,reset:v,setStatus:p}=await b(()=>import("./webSocket-CskTqgpa.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])):{answer:h,connect:d,login:y,reset:v,setStatus:p}=await b(()=>import("./http-D1AQt3Fb.js"),__vite__mapDeps([8,1,2,3,4,5,6,7])):C()})();async function Z(e,t){r[e]&&t!==null&&(r[e].results[m.value]=t,await g,await E,h==null||h(e,t))}async function ee(){await g,d==null||d(C)}async function k(e){P[m.value]=e,await g,await E,y==null||y(e)}X(k);async function te(e){r[e].results={},r[e].status=R.CLEAR,await g,await E,v==null||v(e)}async function ne(e,t){r[e].status=t,await g,await E,p==null||p(e,t)}function se(e){r[e]={results:{},status:R.CLEAR}}const q=new O;function ae(e,t){return e===void 0||t===void 0?!1:t instanceof Array?t.includes(e):Number(t)===e}function oe(e,t,s){var c,f;const n=(f=(c=r[e])==null?void 0:c.results)==null?void 0:f[m.value];if(t){if(n instanceof Array&&s||typeof n=="number"&&!s)return n;if(s&&typeof n=="number")return[n];if(!s&&n instanceof Array)return n[0]}return s?[]:null}function B(e,t=0){let s=3735928559^t,n=1103547991^t;for(let c=0,f;c<e.length;c++)f=e.charCodeAt(c),s=Math.imul(s^f,2654435761),n=Math.imul(n^f,1597334677);return s=Math.imul(s^s>>>16,2246822507)^Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507)^Math.imul(s^s>>>13,3266489909),4294967296*(2097151&n)+(s>>>0)}function ie(){const e=I.value.map(t=>{var s,n;return((n=(s=t==null?void 0:t.meta)==null?void 0:s.slide)==null?void 0:n.content)??""}).join(`
`);return q.encode(B(e))}function re(){var e;return(e=i.pollSettings)!=null&&e.server?i.pollSettings.server.endsWith("/")?i.pollSettings.server.slice(0,-1):i.pollSettings.server:""}export{R as P,P as a,Z as b,ee as c,m as d,se as e,re as f,oe as g,ie as h,ae as i,k as l,r as p,te as r,ne as s,_ as u};
